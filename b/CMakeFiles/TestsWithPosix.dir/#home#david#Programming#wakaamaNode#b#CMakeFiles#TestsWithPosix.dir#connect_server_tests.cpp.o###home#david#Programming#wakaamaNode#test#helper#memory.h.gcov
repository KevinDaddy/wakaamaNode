        -:    0:Source:/home/david/Programming/wakaamaNode/test/helper/memory.h
        -:    0:Graph:/home/david/Programming/wakaamaNode/b/CMakeFiles/TestsWithPosix.dir/connect_server_tests.cpp.gcno
        -:    0:Data:-
        -:    0:Runs:0
        -:    0:Programs:0
        -:    1:/*******************************************************************************
        -:    2: * Copyright (c) 2017-2018  David Graeff <david.graeff@web.de>
        -:    3: *
        -:    4: * Permission is hereby granted, free of charge, to any person obtaining a copy
        -:    5: * of this software and associated documentation files (the "Software"), to deal
        -:    6: * in the Software without restriction, including without limitation the rights
        -:    7: * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
        -:    8: * copies of the Software, and to permit persons to whom the Software is
        -:    9: * furnished to do so, subject to the following conditions:
        -:   10: *
        -:   11: * The above copyright notice and this permission notice shall be included in
        -:   12: * all copies or substantial portions of the Software.
        -:   13: */
        -:   14:#pragma once
        -:   15:
        -:   16:#include <map>
        -:   17:#include <iostream>
        -:   18:
        -:   19:class MemoryObserver {
        -:   20:public:
        -:   21:    using MemAreas = std::map<long, std::string>;
        -:   22:    MemAreas memAreas;
        -:   23:
    #####:   24:    void reset() {
    #####:   25:        memAreas.clear();
    #####:   26:    }
        -:   27:    void add(long mem, const std::string& stacktrace) {
        -:   28:        memAreas.insert(std::make_pair(mem, stacktrace));
        -:   29:    }
        -:   30:    bool remove(long mem) {
        -:   31:        return memAreas.erase(mem);
        -:   32:    }
        -:   33:};
        -:   34:
        -:   35:extern MemoryObserver memoryObserver;
