        -:    0:Source:/home/david/Programming/wakaamaNode/src/object_server.c
        -:    0:Graph:/home/david/Programming/wakaamaNode/b/CMakeFiles/TestsWithPosix.dir/home/david/Programming/wakaamaNode/src/object_server.c.gcno
        -:    0:Data:-
        -:    0:Runs:0
        -:    0:Programs:0
        -:    1:/*******************************************************************************
        -:    2: * Copyright (c) 2017-2018  David Graeff <david.graeff@web.de>
        -:    3: *
        -:    4: * Permission is hereby granted, free of charge, to any person obtaining a copy
        -:    5: * of this software and associated documentation files (the "Software"), to deal
        -:    6: * in the Software without restriction, including without limitation the rights
        -:    7: * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
        -:    8: * copies of the Software, and to permit persons to whom the Software is
        -:    9: * furnished to do so, subject to the following conditions:
        -:   10: *
        -:   11: * The above copyright notice and this permission notice shall be included in
        -:   12: * all copies or substantial portions of the Software.
        -:   13: */
        -:   14:
        -:   15:/*
        -:   16: *  Resources:
        -:   17: *
        -:   18: *          Name         | ID | Operations | Instances | Mandatory |  Type   |  Range  | Units |
        -:   19: *  Short ID             |  0 |     R      |  Single   |    Yes    | Integer | 1-65535 |       |
        -:   20: *  Lifetime             |  1 |    R/W     |  Single   |    Yes    | Integer |         |   s   |
        -:   21: *  Default Min Period   |  2 |    R/W     |  Single   |    No     | Integer |         |   s   |
        -:   22: *  Default Max Period   |  3 |    R/W     |  Single   |    No     | Integer |         |   s   |
        -:   23: *  Disable              |  4 |     E      |  Single   |    No     |         |         |       |
        -:   24: *  Disable Timeout      |  5 |    R/W     |  Single   |    No     | Integer |         |   s   |
        -:   25: *  Notification Storing |  6 |    R/W     |  Single   |    Yes    | Boolean |         |       |
        -:   26: *  Binding              |  7 |    R/W     |  Single   |    Yes    | String  |         |       |
        -:   27: *  Registration Update  |  8 |     E      |  Single   |    Yes    |         |         |       |
        -:   28: *
        -:   29: */
        -:   30:
        -:   31:#include "wakaama/liblwm2m.h"
        -:   32:#include "internal.h"
        -:   33:
    #####:   34:bool server_object_write_verify_cb(lwm2m_list_t* instance, uint16_t changed_res_id) {
    #####:   35:    server_instance_t* i = (server_instance_t*)instance;
        -:   36:
    #####:   37:    if(changed_res_id==7) {
    #####:   38:        size_t len = strlen((char*)i->binding.data);
    #####:   39:        if (!(len > 0 && len <= 3)
    #####:   40:                && (strncmp((char*)i->binding.data, "U",   len) == 0
    #####:   41:                 || strncmp((char*)i->binding.data, "UQ",  len) == 0
    #####:   42:                 || strncmp((char*)i->binding.data, "S",   len) == 0
    #####:   43:                 || strncmp((char*)i->binding.data, "SQ",  len) == 0
    #####:   44:                 || strncmp((char*)i->binding.data, "US",  len) == 0
    #####:   45:                 || strncmp((char*)i->binding.data, "UQS", len) == 0))
    #####:   46:            return false;
        -:   47:    }
    #####:   48:    return true;
        -:   49:}
        -:   50:
    #####:   51:void init_server_object(lwm2m_client_context_t *ctx) {
    #####:   52:    OBJECT_META (server_instance_t,server_object,1,server_object_write_verify_cb,SERVER_OBJECT_RES);
    #####:   53:    memcpy(&ctx->serverObject, server_objectP,sizeof(ctx->serverObject));
    #####:   54:    lwm2m_add_initialize_object(&ctx->context, (lwm2m_object_t*)&ctx->serverObject, false);
    #####:   55:}
